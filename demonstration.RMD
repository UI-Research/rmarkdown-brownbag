---
title: "Demonstration"
author: "Aaron Williams"
date: "6/21/2017"
output: 
  html_document:
    code_folding: hide
    toc: true
    toc_float: TRUE 
params:
  state: "Alabama"
---

```{r settings, echo=FALSE}
knitr::opts_chunk$set(message=FALSE)
```

## Load Packages and Data
```{r load packages}
library(tidyverse)
library(knitr)
library(fivethirtyeight)

source('https://raw.githubusercontent.com/UrbanInstitute/urban_R_theme/master/urban_theme_mac.R')

bad_drivers
```

## Regression
```{r cars}
model <- lm(data = mtcars, mpg ~ hp)
summary(model)
```

## Chart
```{r chart}
bad_drivers %>%
	select(state, perc_speeding, perc_alcohol, perc_not_distracted) %>%
	gather(key = "measure", value = "value", -state) %>%
	filter(state == params$state) %>%
	ggplot(aes(measure, value)) +
		geom_bar(stat = "identity") +
	labs(title = params$state)
```

```{r table}
cars <- head(mtcars)
kable(cars, format = "markdown", caption = "Figure 1.1")
```
